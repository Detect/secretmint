// Generated by CoffeeScript 1.4.0
(function() {
  var $accountsLists, addDelta;

  $accountsLists = $('.accounts-list');

  setInterval(function() {
    return $accountsLists.each(function() {
      var $accountsList, $balances, sum;
      $accountsList = $(this);
      $balances = $accountsList.find('.balance');
      $balances.each(function() {
        return addDelta($(this));
      });
      sum = 0;
      $.each($balances, function() {
        return sum += accounting.unformat($(this).text()) || 0;
      });
      return $accountsList.closest('.moduleAccount').find('h3 .balance').text(accounting.formatMoney(sum));
    });
  }, 50);

  addDelta = function($el) {
    var amount, delta, newAmount, txt;
    if ($el.hasClass('skip')) {
      return;
    }
    delta = Math.floor((Math.random() * 1000) + 250);
    txt = $el.text().replace(/â€“/g, '-');
    amount = accounting.unformat(txt);
    newAmount = amount + delta;
    if (amount <= 0 && newAmount > 0) {
      newAmount = 0;
      $el.addClass('skip');
    }
    return $el.text(accounting.formatMoney(newAmount));
  };

}).call(this);
